<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#1f6f5f">
  <title>Lager Plan</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <h1>Lager Plan</h1>
    <p>Планирование задач склада на день и неделю</p>
  </header>

  <main class="container">
    <section class="panel">
      <h2>План на день</h2>
      <div class="grid3">
        <label>
          Дата
          <input id="selectedDate" type="date">
        </label>
        <label>
          Фильтр сотрудника
          <select id="dayEmployeeFilter"></select>
        </label>
        <label>
          Фильтр типа задачи
          <select id="dayTaskTypeFilter"></select>
        </label>
      </div>

      <form id="dayTaskForm" class="inline-form day-form">
        <select id="dayEmployee" required></select>
        <select id="dayTaskType" required></select>
        <input id="dayHours" type="number" min="0" step="0.25" placeholder="Часы" required>
        <input id="dayOrder" placeholder="Номер заказа / комментарий">
        <button type="submit" class="btn">Добавить в день</button>
      </form>

      <div class="actions-row">
        <button id="printEmployeePlanBtn" class="btn secondary">Печать плана сотрудника</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Сотрудник</th>
            <th>Задача</th>
            <th>Планируемое время</th>
            <th>Номер / комментарий</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="dayTasksBody"></tbody>
      </table>
    </section>

    <section class="panel">
      <h2>Расчет загрузки (день)</h2>
      <div class="calc-controls">
        <label>
          Контроль по сотруднику
          <select id="calcEmployeeFilter"></select>
        </label>
      </div>
      <div id="calcSummary" class="calc-grid"></div>
      <div id="calcEmployeeSummary" class="calc-grid"></div>
      <div id="calcEmployeeStatus" class="status"></div>
      <div id="calcTaskTypeBreakdown" class="calc-breakdown"></div>
      <div id="calcStatus" class="status"></div>
    </section>

    <section class="panel">
      <h2>План на неделю</h2>
      <form id="weekTaskForm" class="inline-form week-form">
        <select id="weekTaskType" required></select>
        <input id="weekHours" type="number" min="0" step="0.25" placeholder="Часы" required>
        <input id="weekComment" placeholder="Комментарий">
        <button type="submit" class="btn">Добавить в неделю</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>Задача</th>
            <th>Часы</th>
            <th>Комментарий</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="weekTasksBody"></tbody>
      </table>
    </section>

    <section class="panel">
      <h2>Расчет загрузки (неделя)</h2>
      <div id="calcWeekSummary" class="calc-grid"></div>
      <div id="calcWeekStatus" class="status"></div>
    </section>

    <section class="panel">
      <details id="settingsDetails" class="settings-details">
        <summary class="settings-summary">Настройки</summary>
        <div class="settings-content">
          <div class="subpanel">
            <h2>Сотрудники</h2>
            <form id="employeeForm" class="inline-form">
              <input id="employeeName" placeholder="Имя" required>
              <div></div>
              <button type="submit" class="btn">Добавить</button>
            </form>
            <div class="table-scroll">
              <table>
                <thead>
                  <tr>
                    <th>Сотрудник</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="employeesBody"></tbody>
              </table>
            </div>

            <h2>Типы задач</h2>
            <form id="taskTypeForm" class="inline-form">
              <input id="taskTypeName" placeholder="Новый тип задачи" required>
              <div></div>
              <button type="submit" class="btn">Добавить тип</button>
            </form>
            <div class="table-scroll">
              <table>
                <thead>
                  <tr>
                    <th>Тип задачи</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="taskTypesBody"></tbody>
              </table>
            </div>
          </div>

          <div class="subpanel">
            <h2>Базовые настройки</h2>
            <div class="grid2">
              <label>
                Сотрудников в смене (авто из списка)
                <input id="staffCount" type="number" min="0" step="1" readonly>
              </label>
              <label>
                Часов в день
                <input id="hoursPerDay" type="number" min="0" step="0.25">
              </label>
            </div>
            <button id="saveSettingsBtn" class="btn">Сохранить настройки</button>
          </div>
        </div>
      </details>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
